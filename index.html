<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Be My Valentine?</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'pastel-pink': '#ffe4e6',
                        'pastel-red': '#fca5a5',
                        'deep-rose': '#e11d48',
                        'cream': '#fff1f2',
                    },
                    fontFamily: {
                        'dancing': ['"Dancing Script"', 'cursive'],
                        'quicksand': ['"Quicksand"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            overflow: hidden; 
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.45);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 8px 32px 0 rgba(225, 29, 72, 0.15);
        }

        .floating-element {
            position: absolute;
            bottom: -50px;
            font-size: 24px;
            animation: floatUp linear infinite;
            opacity: 0;
            z-index: -1;
            user-select: none;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
        }
        
        #noBtn { transition: all 0.2s ease; }
        
        /* Pulse animation for the Press Me button to grab attention */
        @keyframes subtle-pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
            50% { transform: scale(1.05); box-shadow: 0 10px 15px -3px rgba(225, 29, 72, 0.3), 0 4px 6px -2px rgba(225, 29, 72, 0.1); }
        }
        
        .animate-pulse-custom {
            animation: subtle-pulse 2s infinite;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pastel-pink via-cream to-pastel-red h-screen w-full flex items-center justify-center relative">

    <audio id="bgMusic" loop autoplay>
        <source src="Cautela_x_Jose_Vicentes.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <button id="musicToggle" onclick="manualToggle()"
        class="absolute top-4 right-4 bg-white hover:bg-white/90 text-deep-rose font-quicksand font-bold py-2 px-4 rounded-full shadow-md transition-all z-50 flex items-center gap-2 animate-pulse-custom">
        <span id="musicIcon">ðŸŽµ</span>
        <span id="musicText">Press Me</span>
    </button>

    <div id="background-container" class="absolute inset-0 pointer-events-none overflow-hidden"></div>

    <div class="glass-card rounded-3xl p-8 md:p-12 max-w-md w-full mx-4 text-center transform hover:scale-[1.02] transition-transform duration-300">
        
        <div id="image-container" class="mb-6 rounded-2xl overflow-hidden shadow-sm border-4 border-white/50 bg-white/30 h-64 flex items-center justify-center">
            <img src="miffy_x_snoopy.jpg" alt="Miffy and Snoopy" class="w-full h-full object-cover" id="main-image">
        </div>

        <h1 id="question-text" class="font-dancing text-4xl md:text-5xl text-deep-rose mb-2 drop-shadow-sm">
            Will you be my Valentine?
        </h1>
        <p class="font-quicksand text-gray-600 mb-8 text-lg">
            (There's only one right answer!)
        </p>

        <div class="flex flex-col md:flex-row gap-4 justify-center items-center relative h-16">
            
            <button id="yesBtn" onclick="acceptProposal()" 
                class="bg-deep-rose hover:bg-rose-600 text-white font-quicksand font-bold py-3 px-8 rounded-full shadow-lg transform hover:-translate-y-1 transition-all duration-200 text-xl w-32 z-10">
                Yes!
            </button>

            <button id="noBtn" onmouseover="moveButton()" onclick="moveButton()"
                class="bg-white hover:bg-gray-50 text-deep-rose border-2 border-deep-rose font-quicksand font-bold py-3 px-8 rounded-full shadow-md text-xl w-32 absolute md:relative">
                No
            </button>

        </div>
    </div>

    <script>
        /* --- 1. Music Player Logic --- */
        const music = document.getElementById('bgMusic');
        const musicToggleBtn = document.getElementById('musicToggle');
        const musicText = document.getElementById('musicText');
        const musicIcon = document.getElementById('musicIcon');
        let isPlaying = false;

        function updateButtonVisuals(playing) {
            if (playing) {
                musicText.innerText = "Pause";
                musicIcon.innerText = "â¸ï¸";
                musicToggleBtn.classList.remove('animate-pulse-custom'); // Stop pulsing when playing
            } else {
                musicText.innerText = "Press Me";
                musicIcon.innerText = "ðŸŽµ";
                musicToggleBtn.classList.add('animate-pulse-custom'); // Pulse to encourage clicking
            }
        }

        // Attempt Autoplay on Load
        window.onload = function() {
            const playPromise = music.play();

            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // Autoplay started!
                    isPlaying = true;
                    updateButtonVisuals(true);
                })
                .catch(error => {
                    // Autoplay was prevented.
                    isPlaying = false;
                    updateButtonVisuals(false);
                });
            }
        };

        // Fallback: Start music on the very first interaction (click anywhere)
        document.body.addEventListener('click', function() {
            if (!isPlaying) {
                music.play();
                isPlaying = true;
                updateButtonVisuals(true);
            }
        }, { once: true });

        function manualToggle() {
            if (isPlaying) {
                music.pause();
                updateButtonVisuals(false);
            } else {
                music.play();
                updateButtonVisuals(true);
            }
            isPlaying = !isPlaying;
        }

        /* --- 2. Floating Background Logic --- */
        const icons = ['â¤ï¸', 'ðŸŒ¸', 'ðŸŒ¹', 'ðŸ’–', 'ðŸ’Œ', 'ðŸŒ·', 'âœ¨'];
        const container = document.getElementById('background-container');

        function createFloatingElement() {
            const el = document.createElement('div');
            el.classList.add('floating-element');
            el.innerText = icons[Math.floor(Math.random() * icons.length)];
            el.style.left = Math.random() * 100 + 'vw';
            el.style.animationDuration = (Math.random() * 5 + 5) + 's';
            el.style.fontSize = (Math.random() * 20 + 20) + 'px';
            container.appendChild(el);
            setTimeout(() => el.remove(), 10000);
        }
        setInterval(createFloatingElement, 300);

        /* --- 3. The "No" Button Logic --- */
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');

        function moveButton() {
            const maxX = window.innerWidth - noBtn.offsetWidth - 20;
            const maxY = window.innerHeight - noBtn.offsetHeight - 20;
            noBtn.style.position = 'fixed';
            noBtn.style.left = Math.random() * maxX + 'px';
            noBtn.style.top = Math.random() * maxY + 'px';
        }

        /* --- 4. The "Yes" Button Logic --- */
        function acceptProposal() {
            const duration = 3000;
            const end = Date.now() + duration;

            (function frame() {
                confetti({
                    particleCount: 5, angle: 60, spread: 55, origin: { x: 0 },
                    colors: ['#e11d48', '#fca5a5', '#ffe4e6']
                });
                confetti({
                    particleCount: 5, angle: 120, spread: 55, origin: { x: 1 },
                    colors: ['#e11d48', '#fca5a5', '#ffe4e6']
                });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());

            const h1 = document.getElementById('question-text');
            h1.innerText = "Yay! I can't wait! â¤ï¸";
            h1.classList.add('text-5xl', 'scale-110', 'transition-transform');
            
            noBtn.style.display = 'none';
            yesBtn.innerText = "See you soon!";
            yesBtn.classList.remove('hover:-translate-y-1');
            yesBtn.onclick = null;
        }
    </script>
</body>
</html>
